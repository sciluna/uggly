# User-Guided Force-Directed Graph Layout

User-guided force-directed graph layout is a layout approach that lets users specify their desired layout structure by drawing sketches (e.g., rectangle, L-shape). Our method leverages a traditional image analysis method, skeletonization (i.e., medial axis transform), to interpret the user sketch and uses the extracted structural information to guide force-directed layout algorithms with placement constraint support. It works well for small to medium-sized graphs and generates visually effective layouts aligned with user intent.

Click [here](https://sciluna.github.io/uggly/index.html) for a demo.

Here is a video tutorial:

https://github.com/user-attachments/assets/0f4eac7a-4a78-41b8-8089-660c36cb884f

## Usage instructions

## Test with LLMs

We also explored the use of popular multimodal large language models (LLMs) for our extraction step by comparing our skeletonization/polyline simplification processing method to line extraction done solely with GPT-4o and Gemini 2.0 Flash. We generated sketch-based layouts for 160 graphs from the Rome graph dataset, using different extraction methods. In a human evaluation on Amazon Mechanical Turk (2500 pairwise comparisons by 51 workers), the layouts generated by using our approach were preferred overall. We generated rankings of user preference using the Bradley-Terry model, our approach achieved a score of 1.60, compared to 0.86 for Gemini and 0.76 for GPT-4o. Failures in the LLM-based approaches were mostly due to their instability and incorrect assumptions about the sketch content. The layouts we generated for this test together with the human evaluation results and score calculation scripts can be found at [10.5281/zenodo.15264469](https://doi.org/10.5281/zenodo.15264469) 

## Credits

Our method uses [Cytoscape.js](https://js.cytoscape.org) for graph visualization and other graph-related operations. [Skeleton Tracing](https://github.com/LingDong-/skeleton-tracing) algorithm is used to extract the skeleton of the user sketch and [simplify-js](https://github.com/mourner/simplify-js) (licensed under the [BSD 2-Clause License](https://github.com/mourner/simplify-js/blob/master/LICENSE)) is used for polyline simplification. [cytoscape-fcose](https://github.com/iVis-at-Bilkent/cytoscape.js-fcose) is used as the layout algorithm with constraint support.

Third-party libraries used in demo: [Bootstrap](https://getbootstrap.com/), [FileSaver.js](https://github.com/eligrey/FileSaver.js/), [cytoscape-graphml](https://github.com/iVis-at-Bilkent/cytoscape.js-graphml), [cytoscape-sbgn-stylesheet](https://github.com/PathwayCommons/cytoscape-sbgn-stylesheet), [cytoscape-svg](https://github.com/kinimesi/cytoscape-svg) 

## Team
[Hasan Balci](https://github.com/hasanbalci) and [Augustin Luna](https://github.com/cannin) of [Luna Lab](https://github.com/sciluna)
